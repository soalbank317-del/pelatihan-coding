<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS MTs Amtsilati - Berpikir Komputasional</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Quicksand', sans-serif; background-color: #f8f9fa; overflow-x: hidden; }
        
        /* --- STYLE HALAMAN PUBLIK --- */
        #public-view { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; }
        .hero-section { padding: 100px 0; }
        .btn-start { padding: 15px 40px; font-weight: bold; border-radius: 50px; font-size: 1.2rem; transition: 0.3s; }

        /* --- STYLE HALAMAN PRIVAT --- */
        #private-view { display: none; }
        .sidebar { background: linear-gradient(180deg, #4e73df 10%, #224abe 100%); min-height: 100vh; color: white; transition: 0.3s; }
        .nav-link { color: rgba(255,255,255,0.8); border-radius: 10px; margin-bottom: 5px; }
        .nav-link.active { background: rgba(255,255,255,0.2); color: white; }
        .card-custom { border: none; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; }
        .section-content { display: none; }
        .section-content.active { display: block; animation: fadeIn 0.5s; }

        /* Quiz & Materi Styling */
        .question-item { background: #fff; border-radius: 15px; padding: 20px; margin-bottom: 20px; border-left: 5px solid #4e73df; }
        .options-list { list-style: none; padding-left: 0; }
        .option-label { display: block; border: 1px solid #ddd; padding: 10px; border-radius: 10px; cursor: pointer; margin-bottom: 8px; }
        .option-label:hover { background: #f0f4ff; border-color: #4e73df; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="public-view">
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="#"><i class="bi bi-mortarboard-fill"></i> MTs AMTSILATI</a>
            <button class="btn btn-outline-primary rounded-pill px-4" onclick="prosesLogin()">Masuk Siswa</button>
        </div>
    </nav>
    <div class="container hero-section text-center">
        <div class="row align-items-center">
            <div class="col-lg-6 text-lg-start">
                <h1 class="display-4 fw-bold text-dark mb-3">E-Learning <span class="text-primary">Komputasional</span></h1>
                <p class="lead text-muted mb-5">Klik butang di bawah untuk memulakan sesi pembelajaran digital anda.</p>
                <button class="btn btn-primary btn-start shadow-lg" onclick="prosesLogin()">Mula Petualangan <i class="bi bi-rocket-takeoff ms-2"></i></button>
            </div>
            <div class="col-lg-6">
                <img src="https://img.freepik.com/free-vector/online-learning-concept-illustration_114360-1115.jpg" class="img-fluid rounded-5 shadow-sm" alt="Ilustrasi">
            </div>
        </div>
    </div>
</div>

<div id="private-view">
    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-3 col-lg-2 d-md-block sidebar p-3 shadow">
                <div class="text-center mb-4"><h5 class="fw-bold"><i class="bi bi-person-badge"></i> Panel Siswa</h5></div>
                <hr>
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link active" href="#" data-section="dash"><i class="bi bi-grid-1x2-fill me-2"></i> Beranda</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="materi"><i class="bi bi-book-half me-2"></i> Materi Saya</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="soal"><i class="bi bi-pencil-square me-2"></i> Menu Soal</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="nilai"><i class="bi bi-award me-2"></i> Papan Skor</a></li>
                </ul>
                <div class="mt-5 p-2"><button class="btn btn-danger w-100 rounded-pill" onclick="prosesLogout()">Keluar</button></div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="fw-bold" id="pageTitle">Beranda</h2>
                    <div class="badge bg-white text-dark p-2 border rounded-pill px-3">
                        <i class="bi bi-person-circle text-primary me-2"></i> <span id="studentName">Siswa</span>
                    </div>
                </div>

                <div id="dash" class="section-content active">
                    <div class="card border-0 bg-primary text-white p-4 rounded-4 shadow mb-4">
                        <h4>Selamat Datang Kembali! ðŸš€</h4>
                        <p class="mb-0">Pilih menu "Materi Saya" untuk mempelajari konsep Berpikir Komputasional melalui pautan yang disediakan.</p>
                    </div>
                    <div class="row g-4 text-center">
                        <div class="col-md-6"><div class="card card-custom p-4"><h6>Skor Terakhir</h6><h3 id="stat-nilai">0</h3></div></div>
                        <div class="col-md-6"><div class="card card-custom p-4"><h6>Latihan Selesai</h6><h3 id="stat-kuis">0</h3></div></div>
                    </div>
                </div>

                <div id="materi" class="section-content">
                    <h5 class="fw-bold mb-4">Pilih Modul Pembelajaran:</h5>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="card card-custom p-4 h-100 border-start border-primary border-5">
                                <h3>ðŸ§© Dekomposisi</h3>
                                <p class="text-muted">Pelajari cara memecah masalah besar menjadi bagian yang lebih kecil dan mudah dikelola.</p>
                                <a href="https://script.google.com/macros/s/AKfycbzquKCL4g5CpL6J_Hy4m2cGibHebo2aL27gmh1fn74FsfSMVxpyYUK1TLOcP-Suu2hjLw/exec" target="_blank" class="btn btn-primary rounded-pill mt-auto">Buka Materi 1 <i class="bi bi-box-arrow-up-right ms-1"></i></a>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card card-custom p-4 h-100 border-start border-success border-5">
                                <h3>ðŸŽ¨ Pengenalan Pola</h3>
                                <p class="text-muted">Temui kemiripan dalam masalah untuk mencari penyelesaian yang lebih pantas.</p>
                                <a href="https://script.google.com/macros/s/AKfycbxfwjBzEbQdwxRFQbzzk-CVGHjqjIXBji0I5ZqsKTkvgUGDIOSYT_Y93e4CRA_OVI45pQ/exec" target="_blank" class="btn btn-success rounded-pill mt-auto">Buka Materi 2 <i class="bi bi-box-arrow-up-right ms-1"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="soal" class="section-content">
                    <div id="quiz-list-view">
                        <div class="card card-custom p-5 text-center shadow-sm">
                            <h4 class="fw-bold">Ujian Logika Komputasional</h4>
                            <p>Selesaikan 10 soalan di bawah untuk melihat sejauh mana anda faham.</p>
                            <button class="btn btn-primary btn-lg rounded-pill px-5" onclick="mulaiKuis()">Mula Menjawab</button>
                        </div>
                    </div>
                    <div id="quiz-form-view" style="display: none;">
                        <div id="questions-container"></div>
                        <div class="text-center mt-4">
                            <button class="btn btn-success btn-lg rounded-pill px-5 shadow mb-5" onclick="selesaiKuis()">Hantar Jawapan ðŸŽ‰</button>
                        </div>
                    </div>
                </div>

                <div id="nilai" class="section-content">
                    <div class="card card-custom p-4">
                        <h5 class="fw-bold text-center mb-4">Rekod Markah Anda</h5>
                        <div id="score-history" class="text-center text-muted">Tiada rekod buat masa ini.</div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</div>

<script>
    const daftarSoal = [
        { q: "Memecah masalah besar menjadi bahagian kecil disebut...", options: ["Algoritma", "Abstraksi", "Dekomposisi", "Pola"], a: 2 },
        { q: "Langkah-langkah berurutan untuk menyelesaikan tugasan ialah...", options: ["Algoritma", "Pola", "Abstraksi", "Koding"], a: 0 },
        { q: "Mencari kemiripan antara satu masalah dengan masalah lain disebut...", options: ["Dekomposisi", "Pengenalan Pola", "Abstraksi", "Logik"], a: 1 },
        { q: "Mengabaikan detail yang tidak penting dan fokus pada inti masalah ialah...", options: ["Pola", "Dekomposisi", "Algoritma", "Abstraksi"], a: 3 },
        { q: "Merapikan beg sekolah dengan menyusun buku mengikut jadual ialah contoh...", options: ["Abstraksi", "Dekomposisi", "Pola", "Sistem"], a: 1 },
        { q: "Menulis langkah-langkah membuat air teh secara berurutan ialah...", options: ["Algoritma", "Abstraksi", "Pola", "Analisis"], a: 0 },
        { q: "Mengelompokkan baju mengikut warna di dalam almari ialah...", options: ["Dekomposisi", "Abstraksi", "Pengenalan Pola", "Logik"], a: 2 },
        { q: "Peta yang hanya menunjukkan jalan utama sahaja tanpa lukisan pokok ialah...", options: ["Algoritma", "Abstraksi", "Dekomposisi", "Sketsa"], a: 1 },
        { q: "Tujuan utama Berpikir Komputasional ialah untuk...", options: ["Bermain game", "Membaiki komputer", "Memudahkan penyelesaian masalah", "Menghafal"], a: 2 },
        { q: "Apabila masalah sudah dipecah, langkah seterusnya ialah...", options: ["Berhenti", "Mencari Pola", "Tidur", "Menangis"], a: 1 }
    ];

    function prosesLogin() {
        Swal.fire({
            title: 'Login Siswa',
            html: `<input type="text" id="swal-name" class="swal2-input" placeholder="Nama Anda">`,
            confirmButtonText: 'Masuk',
            preConfirm: () => {
                const name = Swal.getPopup().querySelector('#swal-name').value;
                if (!name) { Swal.showValidationMessage(`Sila masukkan nama`); }
                return { name: name }
            }
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('public-view').style.display = 'none';
                document.getElementById('private-view').style.display = 'block';
                document.getElementById('studentName').innerText = result.value.name;
            }
        });
    }

    function mulaiKuis() {
        document.getElementById('quiz-list-view').style.display = 'none';
        document.getElementById('quiz-form-view').style.display = 'block';
        const container = document.getElementById('questions-container');
        container.innerHTML = "";
        daftarSoal.forEach((item, index) => {
            let opts = "";
            item.options.forEach((opt, i) => {
                opts += `<li><label class="option-label"><input type="radio" name="soal${index}" value="${i}"> ${opt}</label></li>`;
            });
            container.innerHTML += `<div class="question-item"><p class="fw-bold">${index+1}. ${item.q}</p><ul class="options-list">${opts}</ul></div>`;
        });
        window.scrollTo(0,0);
    }

    function selesaiKuis() {
        let benar = 0;
        let dijawab = true;
        daftarSoal.forEach((item, index) => {
            const res = document.querySelector(`input[name="soal${index}"]:checked`);
            if (res) { if (parseInt(res.value) === item.a) benar++; } else { dijawab = false; }
        });

        if (!dijawab) { Swal.fire('Perhatian', 'Sila jawab semua soalan!', 'warning'); return; }

        const skor = (benar / 10) * 100;
        Swal.fire({
            title: 'Syabas!',
            html: `<h1 class="text-primary fw-bold">${skor}</h1><p>Markah anda telah direkodkan.</p>`,
            icon: 'success'
        }).then(() => {
            document.getElementById('quiz-form-view').style.display = 'none';
            document.getElementById('quiz-list-view').style.display = 'block';
            document.getElementById('stat-nilai').innerText = skor;
            document.getElementById('stat-kuis').innerText = "1";
            document.getElementById('score-history').innerHTML = `<div class="alert alert-primary">Ujian Dasar: Markah <b>${skor}</b></div>`;
            showSection('dash');
        });
    }

    function showSection(id) {
        document.querySelectorAll('.section-content').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        document.querySelector(`[data-section="${id}"]`).classList.add('active');
        const titles = { 'dash': 'Beranda', 'materi': 'Materi Saya', 'soal': 'Menu Soal', 'nilai': 'Papan Skor' };
        document.getElementById('pageTitle').innerText = titles[id];
    }

    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            showSection(this.getAttribute('data-section'));
        });
    });

    function prosesLogout() { location.reload(); }
</script>

</body>
</html>
